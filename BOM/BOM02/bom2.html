<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>鍵盤移動Box</title>

    <style>
        #box1{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;

        }
        

    </style>

    <script>
        window.onload = function(){

            /*
             * 
             * 接續DOM10 - 按下按鍵後DIV移動時會先卡頓才開始連續移動
             *    編寫後整體思路為 -
             *      將方向和速度分開編寫 由兩個東西控制
             *      只讓onkeydown控制方向
             *      而速度通過定時器來控制
             * 
             */

            let speed = 10;
            let dir = 0;

            document.onkeydown = function(event){
                dir = event.keyCode;
            }

            document.onkeyup = function(){
                dir = 0;
            }

            // 開啟一個定時器
            setInterval(function(){

                switch(dir){
                    case 37 : //向左 left值減少
                        box1.style.left = box1.offsetLeft - speed + "px";
                        break;
                    case 39 : //向右
                        box1.style.left = box1.offsetLeft + speed + "px";
                        break;
                    case 38 : //向上
                        box1.style.top = box1.offsetTop - speed + "px";
                        break;
                    case 40 : //向下
                        box1.style.top = box1.offsetTop + speed + "px"
                }


            },50)

            btnSpeed.onclick = function(){
                    speed = speed + 10
                    btnSpeed.innerHTML = `Speed(${speed})`;
                    if(speed > 100){
                        btnSpeed.innerHTML = `沒有減少鈕(${speed})`;
                    }
                }



        }
    </script>
    
</head>
<body>
    <div id="box1">
        <button id="btnSpeed">Speed++</button>
    </div>
</body>
</html>